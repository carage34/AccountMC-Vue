(function(t){function e(e){for(var a,i,r=e[0],l=e[1],c=e[2],u=0,f=[];u<r.length;u++)i=r[u],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&f.push(o[i][0]),o[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);d&&d(e);while(f.length)f.shift()();return n.push.apply(n,c||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],a=!0,r=1;r<s.length;r++){var l=s[r];0!==o[l]&&(a=!1)}a&&(n.splice(e--,1),t=i(i.s=s[0]))}return t}var a={},o={app:0},n=[];function i(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=a,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(s,a,function(e){return t[e]}.bind(null,a));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var d=l;n.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},1:function(t,e){},1099:function(t,e,s){},"15ea":function(t,e,s){},"2cfd":function(t,e,s){"use strict";var a=s("b235"),o=s.n(a);o.a},"2d3f":function(t,e,s){},"49ef":function(t,e,s){"use strict";var a=s("1099"),o=s.n(a);o.a},"56d7":function(t,e,s){"use strict";s.r(e);var a=s("2b0e"),o=s("ecee"),n=s("c074"),i=s("ad3d");o["c"].add(n["b"]),a["default"].component("font-awesome-icon",i["a"]);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[s("div",[s("v-toolbar",{staticClass:"toolbar",attrs:{right:""}},[s("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:"/"}},[s("v-toolbar-title",{staticClass:"titre1"},[t._v("AirVyus")])],1),s("v-spacer"),s("v-toolbar-items",[s("router-link",{staticClass:"routerlink",attrs:{to:"/"}},[s("v-btn",{staticStyle:{height:"100%","text-transform":"none","font-size":"1em"},attrs:{text:""}},[t._v("Accueil")])],1),s("router-link",{staticClass:"routerlink",attrs:{to:"/add"}},[s("v-btn",{staticClass:"text--bold",staticStyle:{height:"100%","text-transform":"none","font-size":"1em"},attrs:{text:""}},[t._v("Ajouter un compte")])],1),s("router-link",{staticClass:"routerlink",attrs:{to:"/users"}},[this.$session.exists()&&this.isAdmin?s("v-btn",{staticStyle:{height:"100%","text-transform":"none","font-size":"1em"},attrs:{text:""}},[t._v("Liste des utilisateurs")]):t._e()],1),s("router-link",{staticClass:"routerlink",attrs:{to:"/login"}},[this.$session.exists()?t._e():s("v-btn",{staticStyle:{height:"100%","text-transform":"none","font-size":"1em"},attrs:{text:""}},[t._v("Se connecter")])],1),s("router-link",{staticClass:"routerlink",attrs:{to:"/register"}},[this.$session.exists()?t._e():s("v-btn",{staticStyle:{height:"100%","text-transform":"none","font-size":"1em"},attrs:{text:""}},[t._v("S'inscrire")])],1),this.$session.exists()?s("v-btn",{staticClass:"deco",staticStyle:{height:"100%","text-transform":"none","font-size":"1em"},attrs:{text:""},on:{click:t.logout}},[t._v("Se deconnecter")]):t._e()],1)],1),s("router-view",{staticClass:"view"})],1)])},l=[],c=s("0628"),d=s.n(c),u=s("bc3a"),f=s.n(u);a["default"].use(d.a);var p={data(){return{pseudo:"",isAdmin:!1}},methods:{init(){this.$session.has("pseudo")&&(this.pseudo=this.$session.get("pseudo"))},logout(){this.isAdmin=!1,this.$session.destroy(),this.$router.push("/login")}},mounted(){this.init();var t=this;f.a.get("/isAdmin").then((function(e){e.data.isAdmin?(t.isAdmin=!0,console.log(t.isAdmin)):t.isAdmin=!1}))},updated(){this.init();var t=this;f.a.get("/isAdmin").then((function(e){e.data.isAdmin?(t.isAdmin=!0,console.log(e.data)):t.isAdmin=!1}))}},m=p,g=(s("fb21"),s("b0a0"),s("2877")),h=s("6544"),v=s.n(h),b=s("7496"),_=s("8336"),x=s("2fa4"),C=s("71d9"),y=s("2a7f"),$=Object(g["a"])(m,r,l,!1,null,"27e03b41",null),k=$.exports;v()($,{VApp:b["a"],VBtn:_["a"],VSpacer:x["a"],VToolbar:C["a"],VToolbarItems:y["a"],VToolbarTitle:y["b"]});var V=s("f309");a["default"].use(V["a"]);var w=new V["a"]({icons:{iconfont:"mdi"}}),A=s("8c4f"),S=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[s("v-container",[s("dialog-info",{ref:"dialoginfo",attrs:{msg:!0}}),s("modal-confirm",{ref:"modalconfirm",on:{"del-acc":t.delAcc}}),s("div",{staticClass:"container"},[this.$session.exists()?s("v-card",{staticClass:"carte"},[this.$session.exists()?s("h1",{staticClass:"black--text",staticStyle:{"padding-left":"15px","padding-top":"15px"}},[t._v("Bonjour "+t._s(t.pseudo))]):t._e(),s("v-card-title",[t._v("Liste des comptes")]),s("div",{staticStyle:{padding:"15px"}},[s("table",{staticClass:"table"},[s("thead",[s("tr",[s("th"),s("th",[s("b",[t._v("Nom")])]),s("th",[s("b",[t._v("Position")])]),s("th",[s("b",[t._v("Action")])])])]),s("tbody",t._l(t.accounts,(function(e){return s("tr",{key:e.id},[s("td",[s("img",{attrs:{width:"50",height:"50",src:e.url}})]),s("td",[t._v(t._s(e.nom))]),s("td",[t._v(t._s(e.position))]),s("td",[s("div",{staticClass:"btn-group"},[s("button",{staticClass:"btn btn-outline-primary co",attrs:{type:"button",disabled:e.load},on:{click:function(s){return t.action(e.id)}}},[e.load?s("v-progress-circular",{attrs:{size:25,color:"primary",indeterminate:""}}):t._e(),e.load?s("span",[t._v("Loading")]):t._e(),0==e.load&&0==e.connected?s("span",[t._v("Connecter")]):t._e(),0==e.load&&1==e.connected?s("span",[t._v("Deconnecter")]):t._e()],1),t.isAdmin?s("button",{staticClass:"btn btn-outline-primary dropdown-toggle dropdown-toggle-split",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[s("span",{staticClass:"sr-only"},[t._v("Toggle Dropdown")])]):t._e(),t.isAdmin?s("div",{staticClass:"dropdown-menu"},[s("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(s){return t.$router.push("/modify/"+e.id)}}},[s("v-icon",[t._v("mdi-pencil")]),t._v("Modifier\n                        ")],1),s("button",{staticClass:"dropdown-item btn btn-danger",attrs:{type:"button"},on:{click:function(s){return t.deleteAccount(e.id,e.nom)}}},[s("v-icon",[t._v("mdi-delete")]),t._v("Supprimer\n                        ")],1),s("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[s("v-icon",[t._v("mdi-plus-box")]),t._v("Ajouter un groupe\n                        ")],1)]):t._e()])])])})),0)])])],1):t._e()],1)],1)],1)},j=[],E=s("8055"),T=s.n(E),q=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-row",{attrs:{justify:"center"}},[s("v-dialog",{attrs:{persistent:"","max-width":"290"},scopedSlots:t._u([{key:"activator",fn:function(t){t.on}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("v-card",{staticClass:"carte"},[s("v-card-title",{staticClass:"headline"},[t._v(t._s(t.heading))]),s("v-card-text",[t._v(t._s(t.message))]),s("v-card-actions",[s("div",{staticClass:"flex-grow-1"}),s("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v("Ok")])],1)],1)],1)],1)},M=[],O={props:["msg"],data(){return{dialog:!1,message:"",heading:""}},methods:{toggle(){this.dialog=!0},setMessage(t){this.message=t},setHeading(t){this.heading=t}},mounted(){}},P=O,H=s("b0af"),U=s("99d9"),z=s("169a"),B=s("0fd9"),F=Object(g["a"])(P,q,M,!1,null,null,null),L=F.exports;v()(F,{VBtn:_["a"],VCard:H["a"],VCardActions:U["a"],VCardText:U["b"],VCardTitle:U["c"],VDialog:z["a"],VRow:B["a"]});var R=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-row",{attrs:{justify:"center"}},[s("v-dialog",{attrs:{persistent:"","max-width":"290"},scopedSlots:t._u([{key:"activator",fn:function(t){t.on}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("v-card",{staticClass:"carte"},[s("v-card-title",{staticClass:"headline"},[t._v(t._s(t.heading))]),s("v-card-text",[t._v(t._s(t.message))]),s("v-card-actions",[s("v-spacer"),t.view?s("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(t._s(t.cancelText))]):t._e(),s("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:t.confirm}},[t._v(t._s(t.confirmText))])],1)],1)],1)],1)},D=[],I={data(){return{dialog:!1,message:"",heading:"",confirmUrl:"",cancelText:"Annuler",confirmText:"Confirmer",view:!0,second:0,id:0}},methods:{confirm(){if(0===this.second){var t=this;f.a.get(this.confirmUrl).then((function(e){"success"===e.data.status&&(t.second=1,t.view=!1,t.setHeading("Succès"),t.setMessage("Compte supprimé avec succès"),t.confirmText="Ok",t.dialog=!0,t.$emit("del-acc",t.id))}))}else this.dialog=!1},cancel(){this.dialog=!1},toggle(){this.dialog=!0},setMessage(t){this.message=t},setHeading(t){this.heading=t},setConfirmUrl(t,e){this.confirmUrl=t,this.id=e}}},N=I,J=Object(g["a"])(N,R,D,!1,null,null,null),G=J.exports;v()(J,{VBtn:_["a"],VCard:H["a"],VCardActions:U["a"],VCardText:U["b"],VCardTitle:U["c"],VDialog:z["a"],VRow:B["a"],VSpacer:x["a"]}),a["default"].use(d.a);var K={data(){return{pseudo:"",accounts:{},show:!0,socket:T()("https://carage34-accountmc-vue-1.glitch.me"),isAdmin:!1}},methods:{connect(t){this.show=!1,this.$socket.emit("action",{id:t})},action(t){this.accounts[t].load=!0,this.socket.emit("action",{my:t})},deleteAccount(t,e){this.$refs.modalconfirm.setMessage("Voulez vous vraiment supprimer le compte "+e),this.$refs.modalconfirm.setHeading("Confirmation"),this.$refs.modalconfirm.setConfirmUrl("/deleteaccount/"+t,t),this.$refs.modalconfirm.toggle()},delAcc(t){this.socket.emit("delAcc",{my:t})}},sockets:{init:function(t){console.log(t)}},mounted(){this.$session.exists()||this.$router.push("/login");var t=this;f.a.get("/isAdmin").then((function(e){e.data.isAdmin&&(t.isAdmin=!0,console.log(e.data))})),this.socket.on("init",(function(e){t.accounts=e.data,t.show=!1})),this.socket.on("enable_co",(function(e){console.log("enable_co"),console.log(e),t.accounts[e.id].connected=!0,t.accounts[e.id].load=!1})),this.socket.on("enable_deco",(function(e){t.accounts[e.id].connected=!1,t.accounts[e.id].load=!1})),this.socket.on("disable",(function(e){t.accounts[e.id].load=!0})),this.socket.on("logged",(function(e){t.accounts[e.id].load=!1,t.accounts[e.id].connected=!0,t.$refs.dialoginfo.setMessage(e.username+" s'est connecté au serveur avec succès"),t.$refs.dialoginfo.setHeading("Connexion"),t.$refs.dialoginfo.toggle()})),this.socket.on("update",(function(e){t.accounts=e.data})),this.$session.exists()&&(this.pseudo=this.$session.get("pseudo"))},updated(){},name:"home",components:{"dialog-info":L,"modal-confirm":G}},Q=K,W=(s("92f8"),s("a523")),X=s("132d"),Y=s("490a"),Z=Object(g["a"])(Q,S,j,!1,null,"a2b665aa",null),tt=Z.exports;v()(Z,{VApp:b["a"],VCard:H["a"],VCardTitle:U["c"],VContainer:W["a"],VIcon:X["a"],VProgressCircular:Y["a"]});var et=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[s("v-container",[s("dialog-info",{ref:"dialoginfo",attrs:{msg:!0}}),s("v-card",{staticClass:"carte"},[s("v-card-text",[s("h2",[t._v("Se connecter")]),s("v-form",{ref:"form"},[s("v-text-field",{attrs:{"prepend-icon":"mdi-account-circle",label:"Pseudo",rules:[t.rules.required]},model:{value:t.pseudo,callback:function(e){t.pseudo=e},expression:"pseudo"}}),s("v-text-field",{attrs:{"prepend-icon":"mdi-lock-alert",type:"password",label:"Mot de passe",rules:[t.rules.required]},model:{value:t.pass,callback:function(e){t.pass=e},expression:"pass"}}),s("v-btn",{staticClass:"success",attrs:{flat:""},on:{click:t.submit}},[t._v("Valider")])],1)],1)],1)],1)],1)},st=[];a["default"].use(d.a);var at={data(){return{pseudo:"",pass:"",confirmpass:"",rules:{required:t=>!!t||"Champ requis"}}},methods:{submit(){var t=this;if(this.$refs.form.validate()){console.log(this.pseudo),console.log(this.pass);var e={pseudo:this.pseudo,password:this.pass},s={"Content-Type":"application/json"};f.a.post("/login",e,{headers:s}).then((function(e){if(console.log(e.data.auth),"failed"===e.data.auth)t.$refs.dialoginfo.setMessage(e.data.error),t.$refs.dialoginfo.setHeading("Authentification"),t.$refs.dialoginfo.toggle();else{var s=!1;console.log("response "+e.data.admin),1===e.data.admin&&(s=!0,t.$store.commit("change",s)),console.log(s),console.log(t.$store.getters.admin),t.$session.start(),t.$session.set("pseudo",t.pseudo),t.$router.push("/")}})).catch((function(t){console.log(t)}))}}},mounted(){f.a.get("http://localhost:5555/api").then((function(t){console.log(t.data)}))},components:{"dialog-info":L}},ot=at,nt=(s("d6db"),s("4bd4")),it=s("8654"),rt=Object(g["a"])(ot,et,st,!1,null,null,null),lt=rt.exports;v()(rt,{VApp:b["a"],VBtn:_["a"],VCard:H["a"],VCardText:U["b"],VContainer:W["a"],VForm:nt["a"],VTextField:it["a"]});var ct=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[s("v-container",[s("v-card",{staticClass:"carte"},[s("v-card-text",[s("h2",[t._v("S'inscrire")]),s("v-form",{ref:"form"},[s("v-text-field",{attrs:{label:"Pseudo",rules:[t.rules.required,t.rules.minLength,t.checkEmpty]},model:{value:t.pseudo,callback:function(e){t.pseudo=e},expression:"pseudo"}}),s("v-text-field",{attrs:{type:"password",label:"Mot de passe"},model:{value:t.pass,callback:function(e){t.pass=e},expression:"pass"}}),s("v-text-field",{attrs:{type:"password",label:"Confirmer le mot de passe",rules:[t.passConfirmation,t.checkEmpty]},on:{change:t.passConfirmation},model:{value:t.confirmpass,callback:function(e){t.confirmpass=e},expression:"confirmpass"}}),s("v-btn",{staticClass:"success",attrs:{flat:""},on:{click:t.submit}},[t._v("Valider")])],1)],1)],1)],1)],1)},dt=[];a["default"].use(d.a);var ut={data(){return{pseudo:"",pass:"",confirmpass:"",rules:{minLength:t=>t.length>=3||"Votre saisie est plus courte que 3 caractères",required:t=>!!t||"Champ requis"}}},methods:{checkEmpty(t){return!t.replace(/\s/g,"").length&&"Champs requis"},submit(){var t=this;if(this.$refs.form.validate()){console.log(this.pseudo),console.log(this.pass);var e={pseudo:this.pseudo,pass:this.pass},s={"Content-Type":"application/json"};f.a.post("/register",e,{headers:s}).then((function(e){t.$session.start(),t.$session.set("pseudo",t.pseudo),t.$router.push("/")})).catch((function(t){console.log(t)}))}}},computed:{passConfirmation(){return[()=>this.pass===this.confirmpass||"Les mots de passe ne correspondent pas",t=>!!t||"Champ requis",t=>t.length>=3||"Votre saisie est plus courte que 3 caractères"]}}},ft=ut,pt=(s("2cfd"),Object(g["a"])(ft,ct,dt,!1,null,null,null)),mt=pt.exports;v()(pt,{VApp:b["a"],VBtn:_["a"],VCard:H["a"],VCardText:U["b"],VContainer:W["a"],VForm:nt["a"],VTextField:it["a"]});var gt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[s("v-container",[s("dialog-info",{ref:"dialoginfo",attrs:{msg:!0}}),s("v-card",{staticClass:"carte"},[s("v-card-text",[s("h2",[t._v("Ajouter un compte")]),s("v-form",{ref:"form"},[s("v-text-field",{attrs:{label:"Email",type:"email",rules:[t.rules.required,t.rules.emailRules,t.checkEmpty]},model:{value:t.email,callback:function(e){t.email="string"===typeof e?e.trim():e},expression:"email"}}),s("v-text-field",{attrs:{type:"text",label:"Nom",rules:[t.rules.required,t.checkEmpty]},model:{value:t.nom,callback:function(e){t.nom="string"===typeof e?e.trim():e},expression:"nom"}}),s("v-text-field",{attrs:{label:"Mot de passe",type:"password",rules:[t.rules.required,t.checkEmpty]},model:{value:t.mdp,callback:function(e){t.mdp="string"===typeof e?e.trim():e},expression:"mdp"}}),s("v-text-field",{attrs:{label:"Position",type:"text",rules:[t.rules.required,t.checkEmpty]},model:{value:t.position,callback:function(e){t.position="string"===typeof e?e.trim():e},expression:"position"}}),s("v-btn",{staticClass:"success",on:{click:t.submit}},[t._v("Valider")])],1)],1)],1)],1)],1)},ht=[],vt={data(){return{email:"",nom:"",mdp:"",position:"",rules:{required:t=>!!t||"Champ requis",emailRules:t=>/.+@.+/.test(t)||"E-mail incorrect"}}},methods:{checkEmpty(t){return!t.replace(/\s/g,"").length&&"Champs requis"},submit(){var t=this;if(this.$refs.form.validate()){var e={email:this.email,password:this.mdp,position:this.position,nom:this.nom};console.log(e);var s={"Content-Type":"application/json"};f.a.post("/add",e,{headers:s}).then((function(e){console.log(e.data.auth),"failed"===e.data.status?(t.$refs.dialoginfo.setMessage(e.data.error),t.$refs.dialoginfo.setHeading("Insertion d'un nouveau compte"),t.$refs.dialoginfo.toggle()):t.$router.push("/")})).catch((function(t){console.log(t)}))}}},computed:{},components:{"dialog-info":L}},bt=vt,_t=(s("bfeb"),Object(g["a"])(bt,gt,ht,!1,null,null,null)),xt=_t.exports;v()(_t,{VApp:b["a"],VBtn:_["a"],VCard:H["a"],VCardText:U["b"],VContainer:W["a"],VForm:nt["a"],VTextField:it["a"]});var Ct=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[s("v-container",[s("dialog-info",{ref:"dialoginfo",attrs:{msg:!0}}),s("v-card",{staticClass:"carte"},[s("v-card-text",[s("h2",[t._v("Modification de "+t._s(t.nom))]),s("v-form",{ref:"form"},[s("v-text-field",{attrs:{label:"Email",type:"email",rules:[t.rules.required,t.rules.emailRules,t.checkEmpty]},model:{value:t.email,callback:function(e){t.email="string"===typeof e?e.trim():e},expression:"email"}}),s("v-text-field",{attrs:{type:"text",label:"Nom",rules:[t.rules.required,t.checkEmpty]},model:{value:t.nom,callback:function(e){t.nom="string"===typeof e?e.trim():e},expression:"nom"}}),s("v-text-field",{attrs:{label:"Position",type:"text",rules:[t.rules.required,t.checkEmpty]},model:{value:t.position,callback:function(e){t.position="string"===typeof e?e.trim():e},expression:"position"}}),s("v-btn",{staticClass:"success",on:{click:t.submit}},[t._v("Valider")])],1)],1)],1)],1)],1)},yt=[],$t={data(){return{email:"",nom:"",position:"",rules:{required:t=>!!t||"Champ requis",emailRules:t=>/.+@.+/.test(t)||"E-mail incorrect"}}},methods:{checkEmpty(t){return!t.replace(/\s/g,"").length&&"Champ requis"},submit(){var t=this;if(this.$refs.form.validate()){var e={email:this.email,password:this.mdp,position:this.position,nom:this.nom};console.log(e);var s={"Content-Type":"application/json"};f.a.post("/modify/"+this.$route.params.id,e,{headers:s}).then((function(e){console.log(e.data.auth),"failed"===e.data.status?(t.$refs.dialoginfo.setMessage(e.data.error),t.$refs.dialoginfo.setHeading("Insertion d'un nouveau compte"),t.$refs.dialoginfo.toggle()):t.$router.push("/")})).catch((function(t){console.log(t)}))}}},mounted(){var t=this;f.a.get("/isAdmin").then((function(e){console.log(e.data),e.data.idAdmin||t.$router.push("/")})),f.a.get("/account/"+t.$route.params.id).then((function(e){t.email=e.data[0].email,t.nom=e.data[0].nom,t.position=e.data[0].position}))},computed:{},components:{"dialog-info":L}},kt=$t,Vt=(s("aed4"),Object(g["a"])(kt,Ct,yt,!1,null,null,null)),wt=Vt.exports;v()(Vt,{VApp:b["a"],VBtn:_["a"],VCard:H["a"],VCardText:U["b"],VContainer:W["a"],VForm:nt["a"],VTextField:it["a"]});var At=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[s("v-container",[s("div",{staticClass:"container"},[s("dialog-info",{ref:"dialoginfo",attrs:{msg:!0}}),s("v-card",{staticClass:"carte"},[s("v-card-title",[t._v("Liste des utilisateurs")]),s("div",{staticClass:"row justify-content-start"},[s("div",{staticClass:"col-lg-9"},[s("table",{staticClass:"table"},[s("thead",[s("tr",[s("th",[s("b",[t._v("Nom")])]),s("th",[s("b",[t._v("Status")])]),s("th",[s("b",[t._v("Action")])])])]),s("tbody",t._l(t.users,(function(e){return s("tr",{key:e.id},[s("td",[t._v(t._s(e.pseudo))]),s("td",[t._v(t._s(1===e.admin?"Admin":"Membre"))]),s("td",[s("a",{attrs:{href:"#"}},[s("button",{staticClass:"btn btn-outline-primary pad",attrs:{type:"button",disabled:e.load},on:{click:function(s){return t.updateStatus(e.admin,e.id)}}},[e.load?t._e():s("span",[t._v(t._s(0===e.admin?"Promouvoir admin":"Révoquer admin"))]),e.load?s("v-progress-circular",{attrs:{size:25,color:"primary",indeterminate:""}}):t._e(),e.load?s("span",[t._v("Loading")]):t._e()],1)]),s("a",{attrs:{href:"#"}},[s("button",{staticClass:"btn btn-outline-danger pad",attrs:{type:"button"},on:{click:function(s){return t.deleteUser(e.id)}}},[t._v("Supprimer")])])])])})),0)])])])],1)],1)])],1)},St=[],jt={data(){return{users:null}},methods:{updateUser(){var t=this;f.a.get("/users").then((function(e){t.users=e.data,console.log(t.users)}))},updateStatus(t,e){var s=this;s.users[e].load=!0,1===t?f.a.get("/revoke/"+e).then((function(t){console.log(t),"success"===t.data.status?(s.users[e].admin=0,s.users[e].load=!1,s.$refs.dialoginfo.setMessage("Status admin retiré avec succès"),s.$refs.dialoginfo.setHeading("Succès"),s.$refs.dialoginfo.toggle()):(s.users[e].load=!1,s.$refs.dialoginfo.setMessage("Erreur lors du retrait"),s.$refs.dialoginfo.setHeading("Erreur"),s.$refs.dialoginfo.toggle())})):f.a.get("/promote/"+e).then((function(t){"success"===t.data.status?(s.users[e].admin=1,s.users[e].load=!1,s.$refs.dialoginfo.setMessage("Status admin ajouté avec succès"),s.$refs.dialoginfo.setHeading("Succès"),s.$refs.dialoginfo.toggle()):(s.users[e].load=!1,s.$refs.dialoginfo.setMessage("Erreur lors de l'ajout"),s.$refs.dialoginfo.setHeading("Erreur"),s.$refs.dialoginfo.toggle())}))},deleteUser(t){var e=this;f.a.get("/deleteUser/"+t).then((function(t){"success"===t.data.status?(e.$refs.dialoginfo.setMessage("Compte supprimé avec succès"),e.$refs.dialoginfo.setHeading("Succès"),e.$refs.dialoginfo.toggle(),e.updateUser()):(e.$refs.dialoginfo.setMessage("Erreur lors de la supression"),e.$refs.dialoginfo.setHeading("Erreur"),e.$refs.dialoginfo.toggle())}))}},mounted(){var t=this;f.a.get("/isAdmin").then((function(e){e.data.isAdmin||(t.$router.push("/"),console.log(e.data))})),f.a.get("/users").then((function(e){t.users=e.data,console.log(t.users)}))},components:{"dialog-info":L}},Et=jt,Tt=(s("49ef"),s("fd7b"),Object(g["a"])(Et,At,St,!1,null,"69cfd856",null)),qt=Tt.exports;v()(Tt,{VApp:b["a"],VCard:H["a"],VCardTitle:U["c"],VContainer:W["a"],VProgressCircular:Y["a"]});var Mt,Ot,Pt={data(){return{}},mounted(){this.$router.push("/")}},Ht=Pt,Ut=Object(g["a"])(Ht,Mt,Ot,!1,null,null,null),zt=Ut.exports;a["default"].use(A["a"]);var Bt=new A["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:tt},{path:"/login",name:"login",component:lt},{path:"/register",name:"register",component:mt},{path:"/add",name:"name",component:xt},{path:"/modify/:id",name:"modify",component:wt},{path:"/users",name:"users",component:qt},{path:"/logout",name:"logout",component:zt}]}),Ft=s("5f5b"),Lt=(s("4989"),s("ab8b"),s("5132")),Rt=s.n(Lt),Dt=s("2f62");a["default"].use(Dt["a"]);const It=new Dt["a"].Store({state:{admin:!1},mutations:{change(t,e){t.admin=e}},getters:{admin:t=>t.admin}});var Nt=s("a7fe"),Jt=s.n(Nt);f.a.defaults.withCredentials=!0,a["default"].use(Jt.a,f.a),a["default"].use(Ft["a"]),o["c"].add(n["a"]),a["default"].use(new Rt.a({debug:!0,connection:T()("https://carage34-accountmc-vue-1.glitch.me")})),a["default"].component("font-awesome-icon",i["a"]),a["default"].config.productionTip=!1,new a["default"]({vuetify:w,router:Bt,store:It,render:t=>t(k)}).$mount("#app")},"5f0a":function(t,e,s){},"92f8":function(t,e,s){"use strict";var a=s("9b2e"),o=s.n(a);o.a},"9b2e":function(t,e,s){},a299:function(t,e,s){},aed4:function(t,e,s){"use strict";var a=s("15ea"),o=s.n(a);o.a},b0a0:function(t,e,s){"use strict";var a=s("bfea"),o=s.n(a);o.a},b235:function(t,e,s){},bfea:function(t,e,s){},bfeb:function(t,e,s){"use strict";var a=s("c31b"),o=s.n(a);o.a},c31b:function(t,e,s){},d6db:function(t,e,s){"use strict";var a=s("5f0a"),o=s.n(a);o.a},fb21:function(t,e,s){"use strict";var a=s("2d3f"),o=s.n(a);o.a},fd7b:function(t,e,s){"use strict";var a=s("a299"),o=s.n(a);o.a}});
//# sourceMappingURL=app.fe600b00.js.map